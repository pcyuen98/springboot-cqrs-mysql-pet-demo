<app-header></app-header>

<ion-content>
  <!-- Header & Actions -->
  <ion-card-content style="padding:0;">
    <ion-grid style="margin:0; --ion-grid-padding:0; --ion-grid-gap:0;">
      <ion-row class="ion-align-items-center">

        <!-- Title -->
        <ion-col size="2" class="ion-text-start">
          <h1 class="page-title" style="display: flex; align-items: center; gap: 8px; font-size: 28px; color: #032976;">
            <ion-icon name="paw-outline" style="font-size: 42px; color: #032976;"></ion-icon>
            <span style="font-weight: bold; font-size: 22px;">
              {{ pets.length }}
              <small style="font-weight: normal; color: #666;">pets</small>
            </span>
          </h1>
        </ion-col>

        <!-- Search by ID -->
        <ion-col size="2">
          <ion-item>
            <ion-label class="medium" position="floating">Search by ID</ion-label>
            <ion-input #petId type="number"></ion-input>
          </ion-item>
        </ion-col>

        <!-- Search by Data -->
        <ion-col size="2">
          <ion-item>
            <ion-label class="medium" position="floating">Search Text</ion-label>
            <ion-input #petData type="string"></ion-input>
          </ion-item>
        </ion-col>

        <!-- Status Dropdown -->
        <ion-col size="2">
          <ion-item>
            <ion-select class="medium" #petStatus placeholder="Status">
              <ion-select-option *ngFor="let s of petStatuses" [value]="s">
                {{ s }}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>

        <!-- Buttons -->
        <ion-col size="1.5" class="ion-text-right">
          <ion-button color="primary" (click)="search(petId.value, petStatus.value, petData.value)">
            <ion-icon name="search-outline" ></ion-icon>

          </ion-button>
          <ion-button *isAdmin="true" color="success" (click)="onAddPet()">
            <ion-icon name="add-outline"></ion-icon>

          </ion-button>
        </ion-col>

      </ion-row>
    </ion-grid>
  </ion-card-content>

  <!-- Pets List -->
  <ion-card *ngIf="pets.length">
    <ion-card-content>
      <ion-grid>

        <!-- Table Header -->
        <ion-row>
          <ion-col size="0.5"><strong>#</strong></ion-col>
          <ion-col size="2"><strong>Name</strong></ion-col>
          <ion-col size="5"><strong>Description</strong></ion-col>
          <ion-col size="1"><strong>Status</strong></ion-col>
          <ion-col size="1"><strong>Photo</strong></ion-col>
          <ion-col *isAdmin="true" size="auto" class="ion-text-end"><strong>Actions</strong></ion-col>
        </ion-row>

        <!-- Table Rows -->
        <ion-row *ngFor="let pet of pets">
          <ion-col size="0.5">{{ pet.petId ?? 'N/A' }}</ion-col>
          <ion-col size="2">{{ pet.name }}</ion-col>
          <ion-col size="5" class="ion-text-start">{{ pet.description }}</ion-col>
          <ion-col size="1">
            <ion-badge color="success" *ngIf="pet.status === 'AVAILABLE'">Available</ion-badge>
            <ion-badge color="warning" *ngIf="pet.status === 'PENDING'">Pending</ion-badge>
            <ion-badge color="danger" *ngIf="pet.status === 'SOLD'">Sold</ion-badge>
          </ion-col>
          <ion-col size="1">
            <img [src]="pet.photoUrl" alt="{{ pet.name }}" class="pet-photo">
          </ion-col>
          <ion-col *isAdmin="true" size="auto" class="ion-text-end">
            <ion-button fill="clear" color="primary" (click)="onEditPet(pet)">
              <ion-icon slot="icon-only" name="create-outline"></ion-icon>
            </ion-button>
            <ion-button fill="clear" color="danger" (click)="onDeletePet(pet)">
              <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>

      </ion-grid>
    </ion-card-content>
  </ion-card>

</ion-content>

<app-footer></app-footer>