<app-header></app-header>

<ion-content>
  <!-- Header & Actions -->
  <div class="header-actions">
    <ion-grid>
      <ion-row class="ion-align-items-center">

        <!-- Title -->
        <ion-col size="6">
          <h1 class="page-title">
            <ion-icon name="paw-outline" class="title-icon"></ion-icon>
            Pets Management
          </h1>
        </ion-col>

        <!-- Search by ID -->
        <ion-col size="2">
          <ion-item>
            <ion-label position="floating">Search by ID</ion-label>
            <ion-input #petId type="number"></ion-input>
          </ion-item>
        </ion-col>

        <!-- Status Dropdown -->
        <ion-col size="2">
          <ion-item>
            <ion-select placeholder="Select Status" (ionChange)="searchPetsByStatus($event.detail.value)">
              <ion-select-option *ngFor="let s of petStatuses" [value]="s">
                {{ s }}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>

        <!-- Buttons -->
        <ion-col size="2" class="ion-text-right">
          <ion-button color="primary" (click)="search(petId.value)">
            <ion-icon name="search-outline" slot="start"></ion-icon>
            Search
          </ion-button>
          <ion-button *isAdmin color="success" (click)="onAddPet()">
            <ion-icon name="add-circle-outline" slot="start"></ion-icon>
            Add Pet
          </ion-button>
        </ion-col>

      </ion-row>
    </ion-grid>
  </div>

  <!-- Pets List -->
  <ion-card *ngIf="pets.length">
    <ion-card-content>
      <ion-grid>

        <!-- Table Header -->
        <ion-row class="table-header">
          <ion-col size="0.5"><strong>#</strong></ion-col>
          <ion-col size="2"><strong>Name</strong></ion-col>
          <ion-col size="1"><strong>Status</strong></ion-col>
          <ion-col size="4"><strong>Description</strong></ion-col>
          <ion-col size="2"><strong>Photo</strong></ion-col>
          <ion-col *isAdmin size="2" class="ion-text-center"><strong>Actions</strong></ion-col>
        </ion-row>

        <!-- Table Rows -->
        <ion-row *ngFor="let pet of pets">
          <ion-col size="0.5">{{ pet.petId ?? 'N/A' }}</ion-col>
          <ion-col size="2">{{ pet.name }}</ion-col>
          <ion-col size="1">
            <ion-badge color="success" *ngIf="pet.status === 'AVAILABLE'">Available</ion-badge>
            <ion-badge color="warning" *ngIf="pet.status === 'PENDING'">Pending</ion-badge>
            <ion-badge color="danger" *ngIf="pet.status === 'SOLD'">Sold</ion-badge>
          </ion-col>
          <ion-col size="4">{{ pet.description }}</ion-col>
          <ion-col size="2">
            <img [src]="pet.photoUrl" alt="{{ pet.name }}" [ngStyle]="{'width': '100px', 'height': '100px'}" class="pet-photo">
          </ion-col>
          <ion-col *isAdmin size="2" class="ion-text-center">
            <ion-button fill="clear" color="primary" (click)="onEditPet(pet)">
              <ion-icon slot="icon-only" name="create-outline"></ion-icon>
            </ion-button>
            <ion-button fill="clear" color="danger" (click)="onDeletePet(pet)">
              <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>

      </ion-grid>
    </ion-card-content>
  </ion-card>

</ion-content>

<app-footer></app-footer>
