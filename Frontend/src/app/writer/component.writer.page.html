<ion-header>
  <ion-toolbar>
    <ion-title>
      {{ getTitle() }}
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancel()">Close</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- ✅ Add / Edit Form -->
  <form *ngIf="isFormMode()" [formGroup]="form" (ngSubmit)="onSubmitPet()">

    <!-- Name -->
    <ion-item highlightInvalid>
      <ion-label position="floating">
        <span class="required">*</span> Name
      </ion-label>
      <ion-input type="text" formControlName="name"></ion-input>
    </ion-item>

    <!-- Description -->
    <ion-item highlightInvalid>
      <ion-label position="floating">
        <span class="required">*</span> Description
      </ion-label>
      <ion-textarea
        formControlName="description"
        rows="6"
        auto-grow="true"
        placeholder="Enter description here...">
      </ion-textarea>
    </ion-item>

    <!-- Status -->
    <ion-item>
      <ion-label>
        <span class="required">*</span> Status
      </ion-label>
      <ion-select
        formControlName="status"
        interface="popover"
        placeholder="Select Status">
        <ion-select-option *ngFor="let s of petStatuses" [value]="s">
          {{ s }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Photo URL -->
    <app-url-validator-highlight
      [control]="form.get('photoUrl')"
      label="Photo URL"
      errorMessage="Please enter a valid URL starting with http:// or https://">
    </app-url-validator-highlight>

    <!-- Actions -->
    <div class="ion-text-center ion-margin-top">
      <ion-button type="submit" [disabled]="form.invalid" color="primary">
        Save
      </ion-button>
      <ion-button type="button" color="medium" (click)="cancel()">
        Cancel
      </ion-button>
    </div>
  </form>

  <!-- ✅ Delete Confirmation -->
  <ng-container *ngIf="isDeleteMode() && selectedPet">
    <div class="ion-text-center">
      <p class="ion-margin-top">
        You are about to delete
        <strong>{{ selectedPet.name }} (ID: {{ selectedPet.petId ?? 'N/A' }})</strong>.
      </p>
      <p class="ion-margin-bottom"><strong>Are you sure?</strong></p>

      <div>
        <ion-button color="danger" (click)="deletePet()">Delete</ion-button>
        <ion-button color="medium" (click)="cancel()">Cancel</ion-button>
      </div>
    </div>
  </ng-container>

</ion-content>
