<ion-header>
  <ion-toolbar>
    <ion-title>
      {{ action === actions.Add ? 'Add New Pet' : (action === actions.Edit ? 'Edit Pet' : 'Delete Pet') }}
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancel()">Close</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Add/Edit Form -->
  <form *ngIf="action === actions.Add || action === actions.Edit" [formGroup]="form" (ngSubmit)="onSubmitPet()">

    <ion-item>
      <ion-label position="floating">Name</ion-label>
      <ion-input type="text" formControlName="name"></ion-input>
    </ion-item>

    <!-- Description Text Area -->
    <ion-item>
      <ion-label position="floating">Description</ion-label>
      <ion-textarea formControlName="description" rows="6" auto-grow="true"
        placeholder="Enter description here..."></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-label>Status</ion-label>
      <ion-select formControlName="status" interface="popover" placeholder="Select Status">
        <ion-select-option *ngFor="let s of petStatuses" [value]="s">{{ s }}</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Photo URL -->
    <ion-item [class.invalid]="form?.controls['photoUrl'].invalid && form?.controls['photoUrl'].touched">
      <ion-label position="floating">Photo URL</ion-label>
      <ion-input type="text" formControlName="photoUrl"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="form?.controls['photoUrl'].hasError('invalidUrl') && form?.controls['photoUrl'].touched">
      Invalid URL. Must start with http:// or https://
    </ion-text>

    <div class="ion-text-center ion-margin-top">
      <ion-button type="submit" [disabled]="form.invalid" color="primary">Save</ion-button>
      <ion-button type="button" color="medium" (click)="cancel()">Cancel</ion-button>
    </div>
  </form>

  <!-- Delete Confirmation -->
  <div *ngIf="action === actions.Delete && selectedPet" class="ion-text-center">
    <p class="ion-margin-top">
      You are about to delete
      <strong>{{ selectedPet.name }} (ID: {{ selectedPet.petId ?? 'N/A' }})</strong>.
    </p>
    <p class="ion-margin-bottom"><strong>Are you sure?</strong></p>
    <div>
      <ion-button color="danger" (click)="deletePet()">Delete</ion-button>
      <ion-button color="medium" (click)="cancel()">Cancel</ion-button>
    </div>
  </div>

</ion-content>
